<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5385519-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5385519-3');
</script><title>Context Management and Navigation</title> 
<meta  charset="iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="openmp.css" /> 
<meta name="src" content="openmp.tex" /> 
</head><body 
>
<div class="page-heading-wrapper"><div class="page-heading-home"><a href="./openmp.html">HOME</a></div><div class="page-heading"> | <strong>OPENMP API Specification: Version 5.1 November 2020</strong></div></div> <!--l. 161--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu236.html" >next</a>] [<a 
href="openmpsu234.html" >prev</a>] [<a 
href="openmpsu234.html#tailopenmpsu234.html" >prev-tail</a>] [<a 
href="#tailopenmpsu235.html">tail</a>] [<a 
href="openmpse55.html#openmpsu235.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">5.4.2</span>&#x00A0;&#x00A0;<a 
 id="x299-4340005.4.2"></a>Context Management and Navigation</h4>
<p><p><a 
 id="Q1-299-2085"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
The third-party tool provides the OMPD library with callbacks to manage and to navigate context
relationships.
</p> 

<h5 class="subsubsectionHead"><span class="titlemark">5.4.2.1  </span> <a 
 id="x299-4350005.4.2.1"></a><span class="textbf"><span class="texttt">ompd_callback_get_thread_context_for</span></span><span class="textbf"><span class="texttt">_thread</span></span><span class="textbf"><span class="texttt">_id</span></span><span class="textbf"><span class="texttt">_fn_t</span></span></h5>
<a 
 id="dx299-435001"></a>
<p><p><a 
 id="Q1-299-2087"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
The <span class="textbf"><span class="texttt">ompd_callback_get_thread_context_for_thread_id_fn_t</span></span> is the type signature of the
callback routine that the third-party tool provides to the OMPD library to map a native thread identifier to a
third-party tool thread context.
<p><a 
 id="Q1-299-2088"></a>
<span 
class="phvb8t-x-x-110">Format</span>
 <div class="section-wrapper"><div class="section-heading"><div class="section-cspecific"></div></div><div class="section-contents">
                                                                            
                                                                            
</p> 
<p><p><object data="openmp-1.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435002r1"></a></span></p> 
<!--l. 189--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435003r2"></a></span><span 
class="pcrb8t-">typedef</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_rc_t</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435004r3"></a></span><span 
class="pcrb8t-">(*</span><span 
class="pcrb8t-">ompd_callback_get_thread_context_for_thread_id_fn_t</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435005r4"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_address_space_context_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">address_space_context</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435006r5"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_thread_id_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">kind</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435007r6"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_size_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">sizeof_thread_id</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435008r7"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">const</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">thread_id</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435009r8"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_thread_context_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">**</span><span 
class="ec-qtmri-">thread_context</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435010r9"></a></span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-435011r10"></a></span></pre>
<p><object data="openmp-2.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</div></div>
<p><p><a 
 id="Q1-299-2089"></a>
<span 
class="phvb8t-x-x-110">Description</span>
The <span class="textbf"><span class="texttt">ompd_callback_get_thread_context_for_thread_id_fn_t</span></span> is the type signature of the
context mapping callback routine that the third-party tool provides. This callback maps a native thread
identifier to a third-party tool thread context. The native thread identifier is within the address space that
<span class="textit"><span class="textrm">address_space_context</span></span> identifies. The OMPD library can use the thread context, for example, to access
thread local storage.
</p> 
<p><p><a 
 id="Q1-299-2090"></a>
<span 
class="phvb8t-x-x-110">Description of Arguments</span>
The <span class="textit"><span class="textrm">address_space_context</span></span> argument is an opaque handle that the third-party tool provides to reference an
address space. The <span class="textit"><span class="textrm">kind</span></span>, <span class="textit"><span class="textrm">sizeof_thread_id</span></span>, and <span class="textit"><span class="textrm">thread_id</span></span> arguments represent a native thread identifier. On
return, the <span class="textit"><span class="textrm">thread_context</span></span> argument provides an opaque handle that maps a native thread identifier to a
third-party tool thread context.
                                                                            
                                                                            
</p> 
<p><p><a 
 id="Q1-299-2091"></a>
<span 
class="phvb8t-x-x-110">Description of Return Codes</span>
In addition to the general return codes listed at the beginning of Section&#x00A0;<a 
href="openmpse55.html#x297-4300005.4">5.4<!--tex4ht:ref: subsec:ompd-third-party-tool-callback-interface --></a>, routines that use the
<span class="textbf"><span class="texttt">ompd_callback_get_thread_context_for_thread_id_fn_t</span></span> type may also return the
following return codes:
</p> 

  <ul class="itemize1">
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_rc_bad_input</span></span>
  if
  a
  different
  value
  in
  <span class="textit"><span class="textrm">sizeof_thread_id</span></span>
  is
  expected
  for
  the
  native
  thread
  identifier
  kind
  given
  by
  <span class="textit"><span class="textrm">kind</span></span>;
  or
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_rc_unsupported</span></span>
  if
  the
  native
  thread
  identifier
  <span class="textit"><span class="textrm">kind</span></span>
  is
  not
  supported.</li></ul>
                                                                            
                                                                            
<p><p><a 
 id="Q1-299-2092"></a>
<span 
class="phvb8t-x-x-110">Restrictions</span>
Restrictions on routines that use <span class="textbf"><span class="texttt">ompd_callback_get_thread_context_for_thread_id_fn_t</span></span>
are as follows:
</p> 

  <ul class="itemize1">
  <li class="itemize">
  The
  provided
  <span class="textit"><span class="textrm">thread_context</span></span>
  must
  be
  valid
  until
  the
  OMPD
  library
  returns
  from
  the
  OMPD
  third-party
  tool
  interface
  routine.</li></ul>
<p><p><a 
 id="Q1-299-2093"></a>
<span 
class="phvb8t-x-x-110">Cross References</span>
</p> 

  <ul class="itemize1">
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_size_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu221.html#x284-4170005.3.1">5.3.1<!--tex4ht:ref: subsubsubsec:ompd_size_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_thread_id_t</span></span>
                                                                            
                                                                            
  type,
  see
  Section&#x00A0;<a 
href="openmpsu227.html#x290-4230005.3.7">5.3.7<!--tex4ht:ref: ompd:ompd_thread_id_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_address_space_context_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu231.html#x294-4270005.3.11">5.3.11<!--tex4ht:ref: subsubsec:ompd_address_space_context_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_thread_context_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu231.html#x294-4270005.3.11">5.3.11<!--tex4ht:ref: subsubsec:ompd_thread_context_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_rc_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu232.html#x295-4280005.3.12">5.3.12<!--tex4ht:ref: subsubsec:ompd_rc_t --></a>.</li></ul>
<h5 class="subsubsectionHead"><span class="titlemark">5.4.2.2  </span> <a 
 id="x299-4360005.4.2.2"></a><span class="textbf"><span class="texttt">ompd_callback_sizeof_fn_t</span></span></h5>
<a 
 id="dx299-436001"></a>
<p><p><a 
 id="Q1-299-2095"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
The <span class="textbf"><span class="texttt">ompd_callback_sizeof_fn_t</span></span> type is the type signature of the callback routine that the
third-party tool provides to the OMPD library to determine the sizes of the primitive types in an address
space.
<p><a 
 id="Q1-299-2096"></a>
<span 
class="phvb8t-x-x-110">Format</span>
 <div class="section-wrapper"><div class="section-heading"><div class="section-cspecific"></div></div><div class="section-contents">
                                                                            
                                                                            
</p> 
<p><p><object data="openmp-1.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436002r1"></a></span></p> 
<!--l. 273--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436003r2"></a></span><span 
class="pcrb8t-">typedef</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_rc_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">(*</span><span 
class="pcrb8t-">ompd_callback_sizeof_fn_t</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436004r3"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_address_space_context_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">address_space_context</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436005r4"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">ompd_device_type_sizes_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">sizes</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436006r5"></a></span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x299-436007r6"></a></span></pre>
<p><object data="openmp-2.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</div></div>
<p><p><a 
 id="Q1-299-2097"></a>
<span 
class="phvb8t-x-x-110">Description</span>
The <span class="textbf"><span class="texttt">ompd_callback_sizeof_fn_t</span></span> is the type signature of the type-size query callback routine that
the third-party tool provides. This callback provides the sizes of the basic primitive types for a given address
space.
</p> 
<p><p><a 
 id="Q1-299-2098"></a>
<span 
class="phvb8t-x-x-110">Description of Arguments</span>
The callback returns the sizes of the basic primitive types used by the address space context
that the <span class="textit"><span class="textrm">address_space_context</span></span> argument specifies in the location to which the <span class="textit"><span class="textrm">sizes</span></span> argument
points.
</p> 
<p><p><a 
 id="Q1-299-2099"></a>
<span 
class="phvb8t-x-x-110">Description of Return Codes</span>
Routines that use the <span class="textbf"><span class="texttt">ompd_callback_sizeof_fn_t</span></span> type may return the general return codes listed
at the beginning of Section&#x00A0;<a 
href="openmpse55.html#x297-4300005.4">5.4<!--tex4ht:ref: subsec:ompd-third-party-tool-callback-interface --></a>.
</p> 
<p><p><a 
 id="Q1-299-2100"></a>
<span 
class="phvb8t-x-x-110">Cross References</span>
</p> 

  <ul class="itemize1">
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_address_space_context_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu231.html#x294-4270005.3.11">5.3.11<!--tex4ht:ref: subsubsec:ompd_address_space_context_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_rc_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu232.html#x295-4280005.3.12">5.3.12<!--tex4ht:ref: subsubsec:ompd_rc_t --></a>.
                                                                            
                                                                            
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_device_type_sizes_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu233.html#x296-4290005.3.13">5.3.13<!--tex4ht:ref: subsubsec:ompd_device_type_sizes_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompd_callbacks_t</span></span>
  type,
  see
  Section&#x00A0;<a 
href="openmpsu239.html#x303-4430005.4.6">5.4.6<!--tex4ht:ref: subsubsec:ompd_callbacks_t --></a>.</li></ul>
<!--l. 316--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu236.html" >next</a>] [<a 
href="openmpsu234.html" >prev</a>] [<a 
href="openmpsu234.html#tailopenmpsu234.html" >prev-tail</a>] [<a 
href="openmpsu235.html" >front</a>] [<a 
href="openmpse55.html#openmpsu235.html" >up</a>] </p></div>
<p><a 
 id="tailopenmpsu235.html"></a> </p> 
 
</body> 
</html>