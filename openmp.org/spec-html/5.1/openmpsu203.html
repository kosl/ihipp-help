<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5385519-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5385519-3');
</script><title>omp_realloc</title> 
<meta  charset="iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="openmp.css" /> 
<meta name="src" content="openmp.tex" /> 
</head><body 
>
<div class="page-heading-wrapper"><div class="page-heading-home"><a href="./openmp.html">HOME</a></div><div class="page-heading"> | <strong>OPENMP API Specification: Version 5.1 November 2020</strong></div></div> <!--l. 624--><div class="crosslinks"><p class="noindent">[<a 
href="openmpse44.html" >next</a>] [<a 
href="openmpsu202.html" >prev</a>] [<a 
href="openmpsu202.html#tailopenmpsu202.html" >prev-tail</a>] [<a 
href="#tailopenmpsu203.html">tail</a>] [<a 
href="openmpse43.html#openmpsu203.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">3.13.9</span>&#x00A0;&#x00A0;<a 
 id="x253-2860003.13.9"></a><span class="textbf"><span class="texttt">omp_realloc</span></span></h4>
<a 
 id="dx253-286001"></a>
<p><p><a 
 id="Q1-253-1394"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
The <span class="textbf"><span class="texttt">omp_realloc</span></span> routine deallocates previously allocated memory and requests a memory allocation
from a memory allocator.
<p><a 
 id="Q1-253-1395"></a>
<span 
class="phvb8t-x-x-110">Format</span>
 <div class="section-wrapper"><div class="section-heading"><div class="section-cspecific"></div></div><div class="section-contents">
                                                                            
                                                                            
</p> 
<p><p><object data="openmp-1.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286002r1"></a></span></p> 
<!--l. 634--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286003r2"></a></span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="pcrb8t-">omp_realloc</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286004r3"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">ptr</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286005r4"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">size_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286006r5"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_allocator_handle_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">allocator</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286007r6"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_allocator_handle_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">free_allocator</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286008r7"></a></span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286009r8"></a></span></pre>
<p><object data="openmp-2.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</div></div>  <div class="section-wrapper"><div class="section-heading"><div class="section-cppspecific"></div></div><div class="section-contents">
<p><p><object data="openmp-5.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286010r1"></a></span></p> 
<!--l. 645--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286011r2"></a></span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="pcrb8t-">omp_realloc</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286012r3"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">ptr</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286013r4"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">size_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286014r5"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_allocator_handle_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">allocator</span><span 
class="pcrb8t-">=</span><span 
class="pcrb8t-">omp_null_allocator</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286015r6"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_allocator_handle_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">free_allocator</span><span 
class="pcrb8t-">=</span><span 
class="pcrb8t-">omp_null_allocator</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286016r7"></a></span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286017r8"></a></span></pre>
<p><object data="openmp-6.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
<p></div></div>  <div class="section-wrapper"><div class="section-heading"><div class="section-fortranspecific"></div></div><div class="section-contents">
</p> 
<p><p><object data="openmp-11.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286018r1"></a></span></p> 
<!--l. 655--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286019r2"></a></span><span 
class="pcrb8t-">type</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">c_ptr</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&amp;</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286020r3"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_realloc</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">ptr</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">allocator</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">free_allocator</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">bind</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">c</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286021r4"></a></span><span 
class="pcrb8t-">use</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">intrinsic</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">::</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">iso_c_binding</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">only</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">c_ptr</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">c_size_t</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286022r5"></a></span><span 
class="pcrb8t-">type</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">c_ptr</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">value</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">::</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">ptr</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286023r6"></a></span><span 
class="pcrb8t-">integer</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">c_size_t</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">value</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">::</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286024r7"></a></span><span 
class="pcrb8t-">integer</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">omp_allocator_handle_kind</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">value</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">::</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">allocator</span><span 
class="pcrb8t-">,</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">free_allocator</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x253-286025r8"></a></span></pre>
<p><object data="openmp-12.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
<p></div></div>
</p> 
<p><p><a 
 id="Q1-253-1396"></a>
<span 
class="phvb8t-x-x-110">Constraints on Arguments</span>
Unless a <span class="textbf"><span class="texttt">dynamic_allocators</span></span> clause appears on a <span class="textbf"><span class="texttt">requires</span></span> directive in the same compilation unit,
<span class="textbf"><span class="texttt">omp_realloc</span></span> invocations that appear in <span class="textbf"><span class="texttt">target</span></span> regions must not pass <span class="textbf"><span class="texttt">omp_null_allocator</span></span> as
the <span class="textit"><span class="textrm">allocator</span></span> or <span class="textit"><span class="textrm">free_allocator</span></span> argument, which must be constant expressions that evaluate to one of the
predefined memory allocator values.
</p> 
<p><p><a 
 id="Q1-253-1397"></a>
<span 
class="phvb8t-x-x-110">Binding</span>
The binding task set for an <span class="textbf"><span class="texttt">omp_realloc</span></span> region is the generating task.
</p> 
<p><p><a 
 id="Q1-253-1398"></a>
                                                                            
                                                                            
<span 
class="phvb8t-x-x-110">Effect</span>
The <span class="textbf"><span class="texttt">omp_realloc</span></span> routine deallocates the memory to which <span class="textit"><span class="textrm">ptr</span></span> points and requests a new memory
allocation of <span class="textit"><span class="textrm">size</span></span> bytes from the specified memory allocator. If the <span class="textit"><span class="textrm">free_allocator</span></span> argument is specified, it
must be the memory allocator to which the previous allocation request was made. If the <span class="textit"><span class="textrm">free_allocator</span></span>
argument is <span class="textbf"><span class="texttt">omp_null_allocator</span></span> the implementation will determine that value automatically. If the
<span class="textit"><span class="textrm">allocator</span></span> argument is <span class="textbf"><span class="texttt">omp_null_allocator</span></span> the behavior is as if the memory allocator that allocated
the memory to which <span class="textit"><span class="textrm">ptr</span></span> argument points is passed to the <span class="textit"><span class="textrm">allocator</span></span> argument. Upon success it returns a
(possibly moved) pointer to the allocated memory and the contents of the new object shall be the same as
that of the old object prior to deallocation, up to the minimum size of old allocated size and
<span class="textit"><span class="textrm">size</span></span>. Any bytes in the new object beyond the old allocated size will have unspecified values. If
the allocation failed, the behavior that the <span class="textbf"><span class="texttt">fallback</span></span> trait of the <span class="textit"><span class="textrm">allocator</span></span> specifies will be
followed.
</p> 
<p>If <span class="textit"><span class="textrm">ptr</span></span> is <span class="textbf"><span class="texttt">NULL</span></span> (or, <span class="textbf"><span class="texttt">C_NULL_PTR</span></span>, for Fortran), <span class="textbf"><span class="texttt">omp_realloc</span></span> will behave the same as <span class="textbf"><span class="texttt">omp_alloc</span></span> with
the same <span class="textit"><span class="textrm">size</span></span> and <span class="textit"><span class="textrm">allocator</span></span> arguments.
</p> 
<p>If <span class="textit"><span class="textrm">size</span></span> is 0, <span class="textbf"><span class="texttt">omp_realloc</span></span> will return <span class="textbf"><span class="texttt">NULL</span></span> (or, <span class="textbf"><span class="texttt">C_NULL_PTR</span></span>, for Fortran) and the old allocation will be
deallocated.
</p> 
<p>If <span class="textit"><span class="textrm">size</span></span> is not 0, the old allocation will be deallocated if and only if the function returns a non-<span class="textbf"><span class="texttt">NULL</span></span> value
(or, a non-<span class="textbf"><span class="texttt">C_NULL_PTR</span></span> value, for Fortran).
</p> 
<p>Memory allocated by <span class="textbf"><span class="texttt">omp_realloc</span></span> will be byte-aligned to at least the maximum of the alignment
required by <span class="textbf"><span class="texttt">malloc</span></span> and the <span class="textbf"><span class="texttt">alignment</span></span> trait of the allocator.
</p> 
<p> <div class="section-wrapper"><div class="section-heading"><div class="section-fortranspecific"></div></div><div class="section-contents">
</p> 
<p><p><object data="openmp-11.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p>The <span class="textbf"><span class="texttt">omp_realloc</span></span> routine requires an explicit interface and so might not be provided in <span class="textbf"><span class="texttt">omp_lib.h</span></span>.
</p> 
<p><p><object data="openmp-12.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p></div></div>
</p> 
<p><p><a 
 id="Q1-253-1399"></a>
<span 
class="phvb8t-x-x-110">Restrictions</span>
The restrictions to the <span class="textbf"><span class="texttt">omp_realloc</span></span> routine are as follows:
</p> 

  <ul class="itemize1">
  <li class="itemize">
  The
  <span class="textit"><span class="textrm">ptr</span></span>
  argument
  must
  have
                                                                            
                                                                            
  been
  returned
  by
  an
  OpenMP
  allocation
  routine.
  </li>
  <li class="itemize">
  Using
  <span class="textbf"><span class="texttt">omp_realloc</span></span>
  on
  memory
  that
  was
  already
  deallocated
  or
  that
  was
  allocated
  by
  an
  allocator
  that
  has
  already
  been
  destroyed
  with
  <span class="textbf"><span class="texttt">omp_destroy_allocator</span></span>
  results
  in
  unspecified
  behavior.</li></ul>
<p><p><a 
 id="Q1-253-1400"></a>
<span 
class="phvb8t-x-x-110">Cross References</span>
</p> 

  <ul class="itemize1">
                                                                            
                                                                            
  <li class="itemize">
  Memory
  allocators,
  see
  Section&#x00A0;<a 
href="openmpsu61.html#x88-980002.13.2">2.13.2<!--tex4ht:ref: subsec:Memory Allocators --></a>.</li></ul>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="openmpse44.html" >next</a>] [<a 
href="openmpsu202.html" >prev</a>] [<a 
href="openmpsu202.html#tailopenmpsu202.html" >prev-tail</a>] [<a 
href="openmpsu203.html" >front</a>] [<a 
href="openmpse43.html#openmpsu203.html" >up</a>] </p></div>
<p><a 
 id="tailopenmpsu203.html"></a> </p> 
 
</body> 
</html>