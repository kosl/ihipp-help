<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5385519-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5385519-3');
</script><title>omp_unset_lock and omp_unset_nest_lock</title> 
<meta  charset="iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="openmp.css" /> 
<meta name="src" content="openmp.tex" /> 
</head><body 
>
<div class="page-heading-wrapper"><div class="page-heading-home"><a href="./openmp.html">HOME</a></div><div class="page-heading"> | <strong>OPENMP API Specification: Version 5.1 November 2020</strong></div></div> <!--l. 459--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu184.html" >next</a>] [<a 
href="openmpsu182.html" >prev</a>] [<a 
href="openmpsu182.html#tailopenmpsu182.html" >prev-tail</a>] [<a 
href="#tailopenmpsu183.html">tail</a>] [<a 
href="openmpse39.html#openmpsu183.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">3.9.5</span>&#x00A0;&#x00A0;<a 
 id="x229-2620003.9.5"></a><span class="textbf"><span class="texttt">omp_unset_lock</span></span> and <span class="textbf"><span class="texttt">omp_unset_nest_lock</span></span></h4>
<a 
 id="dx229-262001"></a>
<a 
 id="dx229-262002"></a>
<p><p><a 
 id="Q1-229-1260"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
These routines provide the means of unsetting an OpenMP lock.
<p><a 
 id="Q1-229-1261"></a>
<span 
class="phvb8t-x-x-110">Format</span>
 <div class="section-wrapper"><div class="section-heading"><div class="section-ccppspecific"></div></div><div class="section-contents">
</p> 
<p><p><object data="openmp-3.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262003r1"></a></span></p> 
<!--l. 468--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262004r2"></a></span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_unset_lock</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">omp_lock_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">lock</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262005r3"></a></span><span 
class="pcrb8t-">void</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_unset_nest_lock</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">omp_nest_lock_t</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">*</span><span 
class="ec-qtmri-">lock</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">;</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262006r4"></a></span></pre>
<p><object data="openmp-4.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</div></div>
<p> <div class="section-wrapper"><div class="section-heading"><div class="section-fortranspecific"></div></div><div class="section-contents">
                                                                            
                                                                            
</p> 
<p><p><object data="openmp-11.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262007r1"></a></span></p> 
<!--l. 475--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262008r2"></a></span><span 
class="pcrb8t-">subroutine</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_unset_lock</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">svar</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262009r3"></a></span><span 
class="pcrb8t-">integer</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">kind</span><span 
class="pcrb8t-">=</span><span 
class="pcrb8t-">omp_lock_kind</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">svar</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262010r4"></a></span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262011r5"></a></span><span 
class="pcrb8t-">subroutine</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp_unset_nest_lock</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">nvar</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262012r6"></a></span><span 
class="pcrb8t-">integer</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">(</span><span 
class="pcrb8t-">kind</span><span 
class="pcrb8t-">=</span><span 
class="pcrb8t-">omp_nest_lock_kind</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">nvar</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x229-262013r7"></a></span></pre>
<p><object data="openmp-12.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
<p></div></div>
</p> 
<p><p><a 
 id="Q1-229-1262"></a>
<span 
class="phvb8t-x-x-110">Constraints on Arguments</span>
A program that accesses a lock that is not in the locked state or that is not owned by the task that contains
the call through either routine is non-conforming.
</p> 
<p><p><a 
 id="Q1-229-1263"></a>
<span 
class="phvb8t-x-x-110">Effect</span>
For a simple lock, the <span class="textbf"><span class="texttt">omp_unset_lock</span></span> routine causes the lock to become unlocked.
</p> 
<p>For a nestable lock, the <span class="textbf"><span class="texttt">omp_unset_nest_lock</span></span> routine decrements the nesting count, and causes the
lock to become unlocked if the resulting nesting count is zero.
</p> 
<p>For either routine, if the lock becomes unlocked, and if one or more task regions were effectively suspended
because the lock was unavailable, the effect is that one task is chosen and given ownership of the
lock.
                                                                            
                                                                            
</p> 
<p><p><a 
 id="Q1-229-1264"></a>
<span 
class="phvb8t-x-x-110">Execution Model Events</span>
The <span class="textit"><span class="textrm">lock-release</span></span> event occurs in a thread that executes an <span class="textbf"><span class="texttt">omp_unset_lock</span></span> region after it releases the
associated lock but before it finishes the region. The <span class="textit"><span class="textrm">nest-lock-release</span></span> event occurs in a thread that executes
an <span class="textbf"><span class="texttt">omp_unset_nest_lock</span></span> region after it releases the associated lock but before it finishes the
region.
</p> 
<p>The <span class="textit"><span class="textrm">nest-lock-held</span></span> event occurs in a thread that executes an <span class="textbf"><span class="texttt">omp_unset_nest_lock</span></span> region before it
finishes the region when the thread still owns the lock after the nesting count is decremented.
</p> 
<p><p><a 
 id="Q1-229-1265"></a>
<span 
class="phvb8t-x-x-110">Tool Callbacks</span>
A thread dispatches a registered <span class="textbf"><span class="texttt">ompt_callback_mutex_released</span></span> callback with <span class="textbf"><span class="texttt">ompt_mutex_lock</span></span>
as the <span class="textit"><span class="textrm">kind</span></span> argument for each occurrence of a <span class="textit"><span class="textrm">lock-release</span></span> event in that thread. Similarly, a thread dispatches
a registered <span class="textbf"><span class="texttt">ompt_callback_mutex_released</span></span> callback with <span class="textbf"><span class="texttt">ompt_mutex_nest_lock</span></span> as the
<span class="textit"><span class="textrm">kind</span></span> argument for each occurrence of a <span class="textit"><span class="textrm">nest-lock-release</span></span> event in that thread. These callbacks have
the type signature <span class="textbf"><span class="texttt">ompt_callback_mutex_t</span></span> and occur in the task that encounters the
routine.
</p> 
<p>A thread dispatches a registered <span class="textbf"><span class="texttt">ompt_callback_nest_lock</span></span> callback with <span class="textbf"><span class="texttt">ompt_scope_end</span></span> as
its <span class="textit"><span class="textrm">endpoint</span></span> argument for each occurrence of a <span class="textit"><span class="textrm">nest-lock-held</span></span> event in that thread. This callback has the type
signature <span class="textbf"><span class="texttt">ompt_callback_nest_lock_t</span></span>.
</p> 
<p><p><a 
 id="Q1-229-1266"></a>
<span 
class="phvb8t-x-x-110">Cross References</span>
</p> 

  <ul class="itemize1">
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_callback_mutex_t</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu214.html#x272-3570004.5.2.15">4.5.2.15<!--tex4ht:ref: sec:ompt_callback_mutex_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_callback_nest_lock_t</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu214.html#x272-3580004.5.2.16">4.5.2.16<!--tex4ht:ref: sec:ompt_callback_nest_lock_t --></a>.</li></ul>
<!--l. 539--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu184.html" >next</a>] [<a 
href="openmpsu182.html" >prev</a>] [<a 
href="openmpsu182.html#tailopenmpsu182.html" >prev-tail</a>] [<a 
href="openmpsu183.html" >front</a>] [<a 
href="openmpse39.html#openmpsu183.html" >up</a>] </p></div>
<p><a 
 id="tailopenmpsu183.html"></a> </p> 
 
</body> 
</html>