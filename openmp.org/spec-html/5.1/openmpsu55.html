<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5385519-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5385519-3');
</script><title>taskloop Construct</title> 
<meta  charset="iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="openmp.css" /> 
<meta name="src" content="openmp.tex" /> 
</head><body 
>
<div class="page-heading-wrapper"><div class="page-heading-home"><a href="./openmp.html">HOME</a></div><div class="page-heading"> | <strong>OPENMP API Specification: Version 5.1 November 2020</strong></div></div> <!--l. 337--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu56.html" >next</a>] [<a 
href="openmpsu54.html" >prev</a>] [<a 
href="openmpsu54.html#tailopenmpsu54.html" >prev-tail</a>] [<a 
href="#tailopenmpsu55.html">tail</a>] [<a 
href="openmpse20.html#openmpsu55.html" >up</a>] </p></div>
<h4 class="subsectionHead"><span class="titlemark">2.12.2</span>&#x00A0;&#x00A0;<a 
 id="x81-910002.12.2"></a><span class="textbf"><span class="texttt">taskloop</span></span> Construct</h4>
<a 
 id="dx81-91001"></a>
<a 
 id="dx81-91002"></a>
<p><p><a 
 id="Q1-81-300"></a>
<span 
class="phvb8t-x-x-110">Summary</span>
The <span class="textbf"><span class="texttt">taskloop</span></span> construct specifies that the iterations of one or more associated loops will be executed in
parallel using explicit tasks. The iterations are distributed across tasks generated by the construct and
scheduled to be executed. <p><a 
 id="Q1-81-301"></a>
<span 
class="phvb8t-x-x-110">Syntax</span>
 <div class="section-wrapper"><div class="section-heading"><div class="section-ccppspecific"></div></div><div class="section-contents">
</p> 
<p><p><object data="openmp-3.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p>The syntax of the <span class="textbf"><span class="texttt">taskloop</span></span> construct is as follows:
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91003r1"></a></span></p> 
<!--l. 349--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91004r2"></a></span><span 
class="pcrb8t-">#</span><span 
class="pcrb8t-">pragma</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">omp</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">taskloop</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">[</span><span 
class="ec-qtmri-">clause</span><span 
class="ec-qtmri-">[[</span><span 
class="pcrb8t-">,</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">clause</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">...]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">new</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">line</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91005r3"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">loop</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">nest</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91006r4"></a></span></pre>
<p>where <span class="textit"><span class="textrm">loop-nest</span></span> is a canonical loop nest and <span class="textit"><span class="textrm">clause</span></span> is one of the following:
      <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91007r1"></a></span></p> 
<!--l. 355--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91008r2"></a></span><span 
class="pcrb8t-">if</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">taskloop</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">scalar</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">expression</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91009r3"></a></span><span 
class="pcrb8t-">shared</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91010r4"></a></span><span 
class="pcrb8t-">private</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91011r5"></a></span><span 
class="pcrb8t-">firstprivate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91012r6"></a></span><span 
class="pcrb8t-">lastprivate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91013r7"></a></span><span 
class="pcrb8t-">reduction</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">default</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">,</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">reduction</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">identifier</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91014r8"></a></span><span 
class="pcrb8t-">in_reduction</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">reduction</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">identifier</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91015r9"></a></span><span 
class="pcrb8t-">default</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">data</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">sharing</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">attribute</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91016r10"></a></span><span 
class="pcrb8t-">grainsize</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">strict</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">grain</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91017r11"></a></span><span 
class="pcrb8t-">num_tasks</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">strict</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">num</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">tasks</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91018r12"></a></span><span 
class="pcrb8t-">collapse</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">n</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91019r13"></a></span><span 
class="pcrb8t-">final</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">scalar</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">expr</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91020r14"></a></span><span 
class="pcrb8t-">priority</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">priority</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">value</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91021r15"></a></span><span 
class="pcrb8t-">untied</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91022r16"></a></span><span 
class="pcrb8t-">mergeable</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91023r17"></a></span><span 
class="pcrb8t-">nogroup</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91024r18"></a></span><span 
class="pcrb8t-">allocate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="ec-qtmri-">allocator</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span>
      <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91025r19"></a></span></pre>
<p><object data="openmp-4.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</div></div>  <div class="section-wrapper"><div class="section-heading"><div class="section-fortranspecific"></div></div><div class="section-contents">
                                                                            
                                                                            
<p><p><object data="openmp-11.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p>The syntax of the <span class="textbf"><span class="texttt">taskloop</span></span> construct is as follows:
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91026r1"></a></span></p> 
<!--l. 377--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91027r2"></a></span><span 
class="pcrb8t-">!</span><span 
class="pcrb8t-">$omp</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">taskloop</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">[</span><span 
class="ec-qtmri-">clause</span><span 
class="ec-qtmri-">[[</span><span 
class="pcrb8t-">,</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">clause</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">...]</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91028r3"></a></span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="ec-qtmri-">loop</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">nest</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91029r4"></a></span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">!</span><span 
class="pcrb8t-">$omp</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">end</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">taskloop</span><span 
class="ec-qtmri-">]</span>
 <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91030r5"></a></span></pre>
<p>where <span class="textit"><span class="textrm">loop-nest</span></span> is a canonical loop nest and <span class="textit"><span class="textrm">clause</span></span> is one of the following:
      <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91031r1"></a></span></p> 
<!--l. 384--><pre class="listings"><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91032r2"></a></span><span 
class="pcrb8t-">if</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">taskloop</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">scalar</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">logical</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">expression</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91033r3"></a></span><span 
class="pcrb8t-">shared</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91034r4"></a></span><span 
class="pcrb8t-">private</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91035r5"></a></span><span 
class="pcrb8t-">firstprivate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91036r6"></a></span><span 
class="pcrb8t-">lastprivate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91037r7"></a></span><span 
class="pcrb8t-">reduction</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">default</span><span 
class="pcrb8t-">&#x00A0;</span><span 
class="pcrb8t-">,</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">reduction</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">identifier</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91038r8"></a></span><span 
class="pcrb8t-">in_reduction</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">reduction</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">identifier</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91039r9"></a></span><span 
class="pcrb8t-">default</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">data</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">sharing</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">attribute</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91040r10"></a></span><span 
class="pcrb8t-">grainsize</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">strict</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">grain</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">size</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91041r11"></a></span><span 
class="pcrb8t-">num_tasks</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="pcrb8t-">strict</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">num</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">tasks</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91042r12"></a></span><span 
class="pcrb8t-">collapse</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">n</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91043r13"></a></span><span 
class="pcrb8t-">final</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">scalar</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">logical</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">expr</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91044r14"></a></span><span 
class="pcrb8t-">priority</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">priority</span><span 
class="ec-qtmri-">-</span><span 
class="ec-qtmri-">value</span><span 
class="pcrb8t-">)</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91045r15"></a></span><span 
class="pcrb8t-">untied</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91046r16"></a></span><span 
class="pcrb8t-">mergeable</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91047r17"></a></span><span 
class="pcrb8t-">nogroup</span><span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91048r18"></a></span><span 
class="pcrb8t-">allocate</span><span 
class="pcrb8t-">(</span><span 
class="ec-qtmri-">[</span><span 
class="ec-qtmri-">allocator</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="pcrb8t-">:</span><span 
class="ec-qtmri-">]</span><span 
class="ec-qtmri-">&#x00A0;</span><span 
class="ec-qtmri-">list</span><span 
class="pcrb8t-">)</span>
      <span 
class="pcrb8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x81-91049r19"></a></span></pre>
<p>If an <span class="textbf"><span class="texttt">end</span></span>&#x00A0;<span class="textbf"><span class="texttt">taskloop</span></span> directive is not specified, an <span class="textbf"><span class="texttt">end</span></span>&#x00A0;<span class="textbf"><span class="texttt">taskloop</span></span> directive is assumed at the end of the
<span class="textit"><span class="textrm">do-loops</span></span>.
</p> 
<p><p><object data="openmp-12.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p></div></div>
</p> 
<p><p><a 
 id="Q1-81-302"></a>
<span 
class="phvb8t-x-x-110">Binding</span>
The binding thread set of the <span class="textbf"><span class="texttt">taskloop</span></span> region is the current team. A <span class="textbf"><span class="texttt">taskloop</span></span> region binds to the
innermost enclosing <span class="textbf"><span class="texttt">parallel</span></span> region.
</p> 
<p><p><a 
 id="Q1-81-303"></a>
<span 
class="phvb8t-x-x-110">Description</span>
The <span class="textbf"><span class="texttt">taskloop</span></span> construct is a task generating construct. When a thread encounters a <span class="textbf"><span class="texttt">taskloop</span></span> construct,
the construct partitions the iterations of the associated loops into explicit tasks for parallel execution. The
data environment of each generated task is created according to the data-sharing attribute clauses on the
<span class="textbf"><span class="texttt">taskloop</span></span> construct, per-data environment ICVs, and any defaults that apply. The order of the creation of
the loop tasks is unspecified. Programs that rely on any execution order of the logical iterations are
non-conforming.
</p> 
<p>By default, the <span class="textbf"><span class="texttt">taskloop</span></span> construct executes as if it was enclosed in a <span class="textbf"><span class="texttt">taskgroup</span></span> construct with no
statements or directives outside of the <span class="textbf"><span class="texttt">taskloop</span></span> construct. Thus, the <span class="textbf"><span class="texttt">taskloop</span></span> construct creates an
implicit <span class="textbf"><span class="texttt">taskgroup</span></span> region. If the <span class="textbf"><span class="texttt">nogroup</span></span> clause is present, no implicit <span class="textbf"><span class="texttt">taskgroup</span></span> region is
created.
</p> 
<p>If a <span class="textbf"><span class="texttt">reduction</span></span> clause is present, the behavior is as if a <span class="textbf"><span class="texttt">task_reduction</span></span> clause with the
same reduction operator and list items was applied to the implicit <span class="textbf"><span class="texttt">taskgroup</span></span> construct that
encloses the <span class="textbf"><span class="texttt">taskloop</span></span> construct. The <span class="textbf"><span class="texttt">taskloop</span></span> construct executes as if each generated
task was defined by a <span class="textbf"><span class="texttt">task</span></span> construct on which an <span class="textbf"><span class="texttt">in_reduction</span></span> clause with the same
reduction operator and list items is present. Thus, the generated tasks are participants of the
reduction defined by the <span class="textbf"><span class="texttt">task_reduction</span></span> clause that was applied to the implicit <span class="textbf"><span class="texttt">taskgroup</span></span>
construct.
                                                                            
                                                                            
</p> 
<p>If an <span class="textbf"><span class="texttt">in_reduction</span></span> clause is present, the behavior is as if each generated task was defined by a <span class="textbf"><span class="texttt">task</span></span>
construct on which an <span class="textbf"><span class="texttt">in_reduction</span></span> clause with the same reduction operator and list items is present.
Thus, the generated tasks are participants of a reduction previously defined by a reduction scoping
clause.
</p> 
<p>If a <span class="textbf"><span class="texttt">grainsize</span></span> clause is present, the number of logical iterations assigned to each generated task is
greater than or equal to the minimum of the value of the <span class="textit"><span class="textrm">grain-size</span></span> expression and the number of logical
iterations, but less than two times the value of the <span class="textit"><span class="textrm">grain-size</span></span> expression. If the <span class="textbf"><span class="texttt">grainsize</span></span> clause has the
<span class="textbf"><span class="texttt">strict</span></span> modifier, the number of logical iterations assigned to each generated task is equal to the value of
the <span class="textit"><span class="textrm">grain-size</span></span> expression, except for the generated task that contains the sequentially last iteration, which
may have fewer iterations. The parameter of the <span class="textbf"><span class="texttt">grainsize</span></span> clause must be a positive integer
expression.
</p> 
<p>If <span class="textbf"><span class="texttt">num_tasks</span></span> is specified, the <span class="textbf"><span class="texttt">taskloop</span></span> construct creates as many tasks as the minimum of the
<span class="textit"><span class="textrm">num-tasks</span></span> expression and the number of logical iterations. Each task must have at least one logical
iteration. The parameter of the <span class="textbf"><span class="texttt">num_tasks</span></span> clause must be a positive integer expression. If
the <span class="textbf"><span class="texttt">num_tasks</span></span> clause has the <span class="textbf"><span class="texttt">strict</span></span> modifier for a task loop with <span 
class="cmmi-10">N </span>logical iterations,
the logical iterations are partitioned in a balanced manner and each partition is assigned, in
order, to a generated task. The partition size is <span 
class="cmbsy-10">&#x2308;&#x2308;</span><span 
class="cmmi-10">N&#x2215;</span><span class="textit"><span class="textrm">num-tasks</span></span><span 
class="cmbsy-10">&#x2309;&#x2309; </span>until the number of remaining
iterations divides the number of remaining tasks evenly, at which point the partition size becomes
<span 
class="cmbsy-10">&#x230A;&#x230A;</span><span 
class="cmmi-10">N&#x2215;</span><span class="textit"><span class="textrm">num-tasks</span></span><span 
class="cmbsy-10">&#x230B;&#x230B;</span>.
</p> 
<p>If neither a <span class="textbf"><span class="texttt">grainsize</span></span> nor <span class="textbf"><span class="texttt">num_tasks</span></span> clause is present, the number of loop tasks generated and the
number of logical iterations assigned to these tasks is implementation defined.
</p> 
<p>The <span class="textbf"><span class="texttt">collapse</span></span> clause may be used to specify how many loops are associated with the <span class="textbf"><span class="texttt">taskloop</span></span>
construct. The parameter of the <span class="textbf"><span class="texttt">collapse</span></span> clause must be a constant positive integer expression. If the
<span class="textbf"><span class="texttt">collapse</span></span> clause is omitted, the behavior is as if a <span class="textbf"><span class="texttt">collapse</span></span> clause with a parameter value of one
was specified. The <span class="textbf"><span class="texttt">collapse</span></span> clause specifies the number of loops that are collapsed into a
logical iteration space that is then divided according to the <span class="textbf"><span class="texttt">grainsize</span></span> and <span class="textbf"><span class="texttt">num_tasks</span></span>
clauses.
</p> 
<p>At the beginning of each logical iteration, the loop iteration variable or the variable declared by <span class="textit"><span class="textrm">range-decl</span></span>
of each associated loop has the value that it would have if the set of the associated loops was executed
sequentially.
</p> 
<p>The iteration count for each associated loop is computed before entry to the outermost loop. If execution of
any associated loop changes any of the values used to compute any of the iteration counts, then the behavior
is unspecified.
</p> 
<p>When an <span class="textbf"><span class="texttt">if</span></span> clause is present and the <span class="textbf"><span class="texttt">if</span></span> clause expression evaluates to <span class="textit"><span class="textrm">false</span></span>, undeferred tasks are
generated. The use of a variable in an <span class="textbf"><span class="texttt">if</span></span> clause expression causes an implicit reference to the variable in all
enclosing constructs.
</p> 
<p>When a <span class="textbf"><span class="texttt">final</span></span> clause is present and the <span class="textbf"><span class="texttt">final</span></span> clause expression evaluates to <span class="textit"><span class="textrm">true</span></span>, the generated tasks are
final tasks. The use of a variable in a <span class="textbf"><span class="texttt">final</span></span> clause expression of a <span class="textbf"><span class="texttt">taskloop</span></span> construct causes an implicit
reference to the variable in all enclosing constructs.
                                                                            
                                                                            
</p> 
<p>When a <span class="textbf"><span class="texttt">priority</span></span> clause is present, the generated tasks use the <span class="textit"><span class="textrm">priority-value</span></span> as if it was specified for
each individual task. If the <span class="textbf"><span class="texttt">priority</span></span> clause is not specified, tasks generated by the <span class="textbf"><span class="texttt">taskloop</span></span> construct
have the default task priority (zero).
</p> 
<p>When the <span class="textbf"><span class="texttt">untied</span></span> clause is present, each generated task is an untied task.
</p> 
<p>When the <span class="textbf"><span class="texttt">mergeable</span></span> clause is present, each generated task is a mergeable task.
</p> 
<p> <div class="section-wrapper"><div class="section-heading"><div class="section-cppspecific"></div></div><div class="section-contents">
</p> 
<p><p><object data="openmp-5.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p>For <span class="textbf"><span class="texttt">firstprivate</span></span> variables of class type, the number of invocations of copy constructors that perform
the initialization is implementation defined.
</p> 
<p><p><object data="openmp-6.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p></div></div>
                                                                            
                                                                            
</p> 
<p><p><object data="openmp-13.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p><span class="textrm"><span class="textsf"><span class="textbf"><span class="textup"></span></span>Note </span></span>&#8211;  When storage is shared by a <span class="textbf"><span class="texttt">taskloop</span></span> region, the programmer must ensure,
by adding proper synchronization, that the storage does not reach the end of its lifetime
before the <span class="textbf"><span class="texttt">taskloop</span></span> region and its descendant tasks complete their execution.
<p><object data="openmp-14.svg" width="1.0 " height="2.33333 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
</p> 
<p><p><a 
 id="Q1-81-304"></a>
<span 
class="phvb8t-x-x-110">Execution Model Events</span>
The <span class="textit"><span class="textrm">taskloop-begin</span></span> event occurs after a task encounters a <span class="textbf"><span class="texttt">taskloop</span></span> construct but before any other events
that may trigger as a consequence of executing the <span class="textbf"><span class="texttt">taskloop</span></span> region. Specifically, a <span class="textit"><span class="textrm">taskloop-begin</span></span> event
for a <span class="textbf"><span class="texttt">taskloop</span></span> region will precede the <span class="textit"><span class="textrm">taskgroup-begin</span></span> that occurs unless a <span class="textbf"><span class="texttt">nogroup</span></span> clause is present.
Regardless of whether an implicit taskgroup is present, a <span class="textit"><span class="textrm">taskloop-begin</span></span> will always precede any <span class="textit"><span class="textrm">task-create</span></span>
events for generated tasks.
</p> 
<p>The <span class="textit"><span class="textrm">taskloop-end</span></span> event occurs after a <span class="textbf"><span class="texttt">taskloop</span></span> region finishes execution but before resuming execution
of the encountering task.
</p> 
<p>The <span class="textit"><span class="textrm">taskloop-iteration-begin</span></span> event occurs before an explicit task executes each iteration of a <span class="textbf"><span class="texttt">taskloop</span></span>
region.
</p> 
<p><p><a 
 id="Q1-81-305"></a>
<span 
class="phvb8t-x-x-110">Tool Callbacks</span>
A thread dispatches a registered <span class="textbf"><span class="texttt">ompt_callback_work</span></span> callback for each occurrence of a
<span class="textit"><span class="textrm">taskloop-begin</span></span> and <span class="textit"><span class="textrm">taskloop-end</span></span> event in that thread. The callback occurs in the context of the
encountering task. The callback has type signature <span class="textbf"><span class="texttt">ompt_callback_work_t</span></span>. The callback receives
<span class="textbf"><span class="texttt">ompt_scope_begin</span></span> or <span class="textbf"><span class="texttt">ompt_scope_end</span></span> as its <span class="textit"><span class="textrm">endpoint</span></span> argument, as appropriate, and
<span class="textbf"><span class="texttt">ompt_work_taskloop</span></span> as its <span class="textit"><span class="textrm">wstype</span></span> argument.
</p> 
<p>A thread dispatches a registered <span class="textbf"><span class="texttt">ompt_callback_dispatch</span></span> callback for each occurrence of a
<span class="textit"><span class="textrm">taskloop-iteration-begin</span></span> event in that thread. The callback occurs in the context of the encountering task.
The callback has type signature <span class="textbf"><span class="texttt">ompt_callback_dispatch_t</span></span>.
</p> 
<p><p><a 
 id="Q1-81-306"></a>
<span 
class="phvb8t-x-x-110">Restrictions</span>
Restrictions to the <span class="textbf"><span class="texttt">taskloop</span></span> construct are as follows:
</p> 

  <ul class="itemize1">
  <li class="itemize">
  If
                                                                            
                                                                            
  a
  <span class="textbf"><span class="texttt">reduction</span></span>
  clause
  is
  present,
  the
  <span class="textbf"><span class="texttt">nogroup</span></span>
  clause
  must
  not
  be
  specified.
  </li>
  <li class="itemize">
  The
  same
  list
  item
  cannot
  appear
  in
  both
  a
  <span class="textbf"><span class="texttt">reduction</span></span>
  and
  an
  <span class="textbf"><span class="texttt">in_reduction</span></span>
  clause.
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">grainsize</span></span>
  clause
  can
  appear
  on
  the
  directive.
                                                                            
                                                                            
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">num_tasks</span></span>
  clause
  can
  appear
  on
  the
  directive.
  </li>
  <li class="itemize">
  Neither
  the
  <span class="textbf"><span class="texttt">grainsize</span></span>
  clause
  nor
  the
  <span class="textbf"><span class="texttt">num_tasks</span></span>
  clause
  may
  appear
  on
  the
  directive
  if
  any
  of
  the
  associated
  loops
  is
  a
  non-rectangular
  loop.
  </li>
  <li class="itemize">
                                                                            
                                                                            
  The
  <span class="textbf"><span class="texttt">grainsize</span></span>
  clause
  and
  <span class="textbf"><span class="texttt">num_tasks</span></span>
  clause
  are
  mutually
  exclusive
  and
  may
  not
  appear
  on
  the
  same
  <span class="textbf"><span class="texttt">taskloop</span></span>
  directive.
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">collapse</span></span>
  clause
  can
  appear
  on
  the
  directive.
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">if</span></span>
  clause
  can
  appear
  on
                                                                            
                                                                            
  the
  directive.
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">final</span></span>
  clause
  can
  appear
  on
  the
  directive.
  </li>
  <li class="itemize">
  At
  most
  one
  <span class="textbf"><span class="texttt">priority</span></span>
  clause
  can
  appear
  on
  the
  directive.</li></ul>
<p><p><a 
 id="Q1-81-307"></a>
<span 
class="phvb8t-x-x-110">Cross References</span>
</p> 

  <ul class="itemize1">
  <li class="itemize">
  Canonical
  loop
  nest
  form,
  see
  Section&#x00A0;<a 
href="openmpsu45.html#x70-700002.11.1">2.11.1<!--tex4ht:ref: subsec:Canonical Loop Nest Form --></a>.
                                                                            
                                                                            
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">tile</span></span>
  construct,
  see
  Section&#x00A0;<a 
href="openmpsu53.html#x78-870002.11.9.1">2.11.9.1<!--tex4ht:ref: subsubsec:tile Construct --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">task</span></span>
  construct,
  Section&#x00A0;<a 
href="openmpsu54.html#x80-900002.12.1">2.12.1<!--tex4ht:ref: subsec:task Construct --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">if</span></span>
  clause,
  see
  Section&#x00A0;<a 
href="openmpse26.html#x130-1400002.18">2.18<!--tex4ht:ref: sec:if Clause --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">taskgroup</span></span>
  construct,
  Section&#x00A0;<a 
href="openmpsu104.html#x137-1470002.19.6">2.19.6<!--tex4ht:ref: subsec:taskgroup Construct --></a>.
  </li>
  <li class="itemize">
  Data-sharing
  attribute
  clauses,
  Section&#x00A0;<a 
href="openmpsu116.html#x151-1650002.21.4">2.21.4<!--tex4ht:ref: subsec:Data-Sharing Attribute Clauses --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_scope_begin</span></span>
  and
  <span class="textbf"><span class="texttt">ompt_scope_end</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu212.html#x269-3180004.4.4.11">4.4.4.11<!--tex4ht:ref: sec:ompt_scope_endpoint_t --></a>.
                                                                            
                                                                            
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_work_taskloop</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu212.html#x269-3220004.4.4.15">4.4.4.15<!--tex4ht:ref: sec:ompt_work_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_callback_work_t</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu214.html#x272-3470004.5.2.5">4.5.2.5<!--tex4ht:ref: sec:ompt_callback_work_t --></a>.
  </li>
  <li class="itemize">
  <span class="textbf"><span class="texttt">ompt_callback_dispatch_t</span></span>,
  see
  Section&#x00A0;<a 
href="openmpsu214.html#x272-3480004.5.2.6">4.5.2.6<!--tex4ht:ref: sec:ompt_callback_dispatch_t --></a>.
  </li></ul>
<!--l. 609--><div class="crosslinks"><p class="noindent">[<a 
href="openmpsu56.html" >next</a>] [<a 
href="openmpsu54.html" >prev</a>] [<a 
href="openmpsu54.html#tailopenmpsu54.html" >prev-tail</a>] [<a 
href="openmpsu55.html" >front</a>] [<a 
href="openmpse20.html#openmpsu55.html" >up</a>] </p></div>
<p><a 
 id="tailopenmpsu55.html"></a> </p> 
 
</body> 
</html>